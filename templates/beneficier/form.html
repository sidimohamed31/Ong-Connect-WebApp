{% extends 'base.html' %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow-lg mb-4">
            <div class="card-header bg-white py-3 border-0">
                <h4 class="card-title fw-bold mb-0 text-primary"><i class="bi bi-people me-2"></i> {{ t.add_new if
                    action == 'add' else t.edit }} - {{ t.beneficiaries }}</h4>
            </div>
            <div class="card-body p-4">
                <form method="POST">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <label for="prenom" class="form-label">{{ t.first_name }}</label>
                            <input type="text" class="form-control" id="prenom" name="prenom"
                                value="{{ beneficiary.prenom if beneficiary else '' }}"
                                placeholder="{{ t.first_name }}...">
                        </div>
                        <div class="col-md-6 mb-4">
                            <label for="nom" class="form-label">{{ t.last_name }}</label>
                            <input type="text" class="form-control" id="nom" name="nom"
                                value="{{ beneficiary.nom if beneficiary else '' }}" required
                                placeholder="{{ t.last_name }}...">
                        </div>
                    </div>
                    <div class="mb-4">
                        <label for="adresse" class="form-label">{{ t.address }}</label>
                        <div class="input-group">
                            <span class="input-group-text bg-light"><i class="bi bi-geo-alt"></i></span>
                            <input type="text" class="form-control" id="adresse" name="adresse"
                                value="{{ beneficiary.adresse if beneficiary else '' }}">
                        </div>
                    </div>
                    <div class="mb-4">
                        <label for="description_situation" class="form-label">{{ t.description }}</label>
                        <textarea class="form-control" id="description_situation" name="description_situation" rows="4"
                            placeholder="{{ t.description }}...">{{ beneficiary.description_situation if beneficiary else '' }}</textarea>
                    </div>
                    <div class="mb-4">
                        <label for="id_cas_social" class="form-label">{{ t.social_cases }}</label>
                        <select class="form-select" id="id_cas_social" name="id_cas_social">
                            {% for case in cases %}
                            <option value="{{ case.id_cas_social }}" {{ 'selected' if beneficiary and
                                beneficiary.id_cas_social==case.id_cas_social else '' }}>{{ case.titre }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="d-flex justify-content-end gap-3 mt-5">
                        <a href="{{ url_for('list_beneficiaries') }}" class="btn btn-light px-4">{{ t.cancel }}</a>
                        <button type="submit" class="btn btn-primary px-4 shadow-sm"><i class="bi bi-check-lg"></i> {{
                            t.save }}</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}